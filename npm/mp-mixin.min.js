!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.mpmixin=e():t.mpmixin=e()}(this,(function(){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";function o(t){var e=t.data,n=t.target,o=t.force,i=void 0!==o&&o,r=[];for(var a in e)i||void 0===n[a]?n[a]=e[a]:r.push(a);return r}var i;n.r(e),n.d(e,"mixinMainProcess",(function(){return g})),n.d(e,"injectStaff",(function(){return h})),n.d(e,"globalMixin",(function(){return y})),n.d(e,"createStore",(function(){return b})),n.d(e,"initGlobalStore",(function(){return x})),n.d(e,"version",(function(){return S}));var r,a=0;function f(t){var e,n,o=++a,i={},r=(e=[],n=null,{onEventReady:function(t){for(var o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i];return e.find((function(e){return e.fn===t}))||e.push({fn:t,args:o}),null!==n&&(0===o.length&&n&&(o=n),t.apply(void 0,o)),t},eventReady:function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];n=t,e.forEach((function(e){e.fn.apply(e,0===t.length?e.args:t)}))},removeListener:function(t){var n=e.find((function(e){return e.fn===t}));n&&e.splice(e.indexOf(n),1)}}),f=r.onEventReady,u=r.eventReady,s=r.removeListener;return{state:t,__:{_id:o,_injectContext:function(t,e){!function(t,e,n){var o=t.setData;t._setDataList||(t._setDataList=[],n._nativeSetData=o,t.setData=function(e,n){return t._setDataList.forEach((function(t){return t(e)})),o.call(t,e,n)});t._setDataList.push((function(o){var i=n._store[e],r=i.store,a=i.ignoreList;for(var f in o)r.__._hitState(f,o[f],a,t)}))}(t,o,e);var n=f((function(o,i){t.__unload?s(n):t!==i&&e._nativeSetData.call(t,o)}))},_hitState:function(e,n,o,r){var a=function(t){return i[t]||(i[t]=t.replace(/\[/g,".").replace(/\]/g,"").split(".")),i[t]}(e),f=a[0];return void 0!==t[f]&&-1===o.indexOf(f)&&(function(e,n,o,i){var r=t,a=e.length-1;e.forEach((function(t,e){var f;if(e===a)r[t]=n,u(((f={})[o]=n,f),i);else{if(void 0===r[t])throw new Error("Error setData:"+o);r=r[t]}}))}(a,n,e,r),!0)}}}}function u(t,e,n){0===e?t.onLoad=n:1===e&&(t.lifetimes||(t.lifetimes={}),t.lifetimes.attached=n)}function s(t){var e=t.options,n=t.store,o=t.type,i=t.storeTool;if(n){var r=function(){n.__._injectContext(this,i)},a=function(t,e){return 0===e?t.onLoad:1===e&&t.lifetimes?t.lifetimes.attached:null}(e,o);if(a){if(!i._onLoadList){i._onLoadList=[];u(e,o,(function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];i._onLoadList.forEach((function(e){return e.call(t)})),a.apply(this,e)}))}i._onLoadList.push(r)}else u(e,o,r)}}function l(t){return i=t.__?t:f(t)}var c=["onLoad","onShow","onReady","onHide","onShow","onUnload","onPullDownRefresh","onReachBottom","onShareAppMessage","onShareTimeline","onAddToFavorites","onPageScroll","onResize","onTabItemTap"];function d(t,e){void 0===e&&(e=0);var n=function(){this.__unload=!0},o=0===e?"onUnload":"detached";if(t[o]){var i=t[o];t[o]=function(){i.call(this),n.call(this)}}else t[o]=n}function v(t){var e=t.options,n=t.mixin,r=t.global,a=void 0!==r&&r,f=t.type,u=void 0===f?0:f,s=t.storeTool;return void 0===n&&(n=e.mixin),void 0===n||(n=function t(e){if("object"!=typeof e)return e;if(e instanceof Array)return e.map((function(e){return t(e)}));var n={};for(var o in e)n[o]=t(e[o]);return n}(n),0===u?function(t,e){o({data:function(t,e){void 0===e&&(e=[]);var n={};return e.forEach((function(e){void 0!==t[e]&&(n[e]=t[e])})),n}(e,c),target:t}),d(t)}(e,n):1===u&&function(t,e){var n=e.lifetimes;t.lifetimes||(t.lifetimes={}),n&&o({data:n,target:t.lifetimes}),d(t.lifetimes,1);var i=e.pageLifetimes;i&&(t.pageLifetimes||(t.pageLifetimes={}),o({data:i,target:t.pageLifetimes}))}(e,n),function(t,e){void 0!==e&&void 0!==t.data&&o({data:e,target:t.data})}(e,n.data),function(t,e,n){if(void 0===n&&(n=0),e){var i=1===n;i&&!t.methods&&(t.methods={}),o({data:e,target:i?t.methods:t})}}(e,n.methods,u),function(t){var e=t.options,n=t.mixinStore,r=t.storeTool,a=t.global,f=void 0!==a&&a;if(void 0!==e.data){var u=f?i:e.store||n;u&&(r._store||(r._store={}),r._store[u.__._id]={store:u,ignoreList:o({data:u.state,target:e.data})})}}({options:e,mixinStore:n.store,global:a,storeTool:s})),e}function p(t){var e;r=t,(e=t.store)&&l(e)}var m,_;function g(t,e){void 0===e&&(e=0),t.data||(t.data={});var n={};return t=function(t){var e=t.options,n=t.type,o=t.storeTool;return v({options:e,mixin:r,global:!0,type:n,storeTool:o})}({options:t,type:e,storeTool:n}),function(t){var e=t.options,n=t.type,o=t.storeTool,i=o._store;if(i)for(var r in i)s({options:e,store:i[r].store,type:n,storeTool:o})}({options:t=v({options:t,type:e,storeTool:n}),type:e,storeTool:n}),t}function h(t){t.mixin=p,t.createStore=f,t.initGlobalStore=l,t.mpMixinVersion="1.0.1"}m=Page,Page=function(t){m(g(t))},_=Component,Component=function(t){_(g(t,1))},"undefined"!=typeof wx?h(wx):"undefined"!=typeof qq&&h(qq);var y=p,b=f,x=l,S="1.0.1",L={globalMixin:y,createStore:b,initGlobalStore:x,version:S,injectStaff:h};e.default={globalMixin:y,createStore:b,initGlobalStore:x,version:S,injectStaff:h,default:L}}]).default}));